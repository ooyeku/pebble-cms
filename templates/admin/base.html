<!doctype html>
<html lang="en" class="site-theme-{{ theme.name | default(value='default') }}">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>{% block title %}Admin{% endblock %} - {{ site.title }}</title>
        <script src="https://unpkg.com/htmx.org@1.9.10"></script>
        <style>
            {% include "css/bundle-admin.css" %}
        </style>
        {% if theme_custom_css %}
        <style>
            :root { {{ theme_custom_css | safe }} }
        </style>
        {% endif %}
    </head>
    <body class="admin-body admin-layout">
        <a href="#main-content" class="skip-link">Skip to main content</a>
        <aside class="admin-sidebar" aria-label="Admin sidebar">
            <h1><a href="/admin">Pebble</a></h1>
            <nav aria-label="Admin navigation">
                <a href="/admin">Dashboard</a>
                <a href="/admin/posts">Posts</a>
                <a href="/admin/pages">Pages</a>
                <a href="/admin/series">Series</a>
                <a href="/admin/snippets">Snippets</a>
                <a href="/admin/media">Media</a>
                <a href="/admin/tags">Tags</a>
                <div class="divider"></div>
                <a href="/admin/database">Database</a>
                <a href="/admin/analytics">Analytics</a>
                {% if user.role == "admin" %}<a href="/admin/audit">Audit Log</a>{% endif %}
                {% if user.role == "admin" %}<a href="/admin/tokens">API Tokens</a>{% endif %}
                {% if user.role == "admin" %}<a href="/admin/webhooks">Webhooks</a>{% endif %}
                <a href="/admin/settings">Settings</a>
                {% if user.role == "admin" %}<a href="/admin/users">Users</a>{%
                endif %}
                <a href="/" target="_blank">View Site</a>
                <form
                    action="/admin/logout"
                    method="post"
                    style="margin-top: 0.5rem"
                >
                    <button
                        type="submit"
                        class="btn btn-secondary"
                        style="width: 100%"
                    >
                        Logout
                    </button>
                </form>
                <button
                    class="theme-toggle-admin"
                    id="theme-toggle"
                    title="Toggle theme"
                    aria-label="Toggle theme"
                >
                    <svg
                        class="icon-sun"
                        width="16"
                        height="16"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        aria-hidden="true"
                    >
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line
                            x1="18.36"
                            y1="18.36"
                            x2="19.78"
                            y2="19.78"
                        ></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                    <svg
                        class="icon-moon"
                        width="16"
                        height="16"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        aria-hidden="true"
                    >
                        <path
                            d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"
                        ></path>
                    </svg>
                    <span>Toggle Theme</span>
                </button>
                <div class="sidebar-version">Pebble v{{ version }}</div>
            </nav>
        </aside>
        <main class="admin-main" id="main-content">
            <div id="flash-container" aria-live="polite">{% block flash %}{% endblock %}</div>
            {% block content %}{% endblock %}
        </main>
        {% block scripts %}{% endblock %}
        <script src="/js/admin.js"></script>
    </body>
</html>
